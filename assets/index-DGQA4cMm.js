(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();document.querySelector("#app").innerHTML=`
  <div class="game-container">
    <h1>Atimk iš babos palikimą!</h1>
    <div class="score-board">
      <div>Lygis: <span id="level">1</span></div>
      <div><span id="progress">0</span>%</div>
    </div>
    <canvas id="gameCanvas" width="800" height="250"></canvas>
    <div class="controls">
      <p>Spaudinėk ← →, kad atimtum iš babos palikimą!</p>
    </div>
  </div>
`;const r=document.getElementById("gameCanvas"),e=r.getContext("2d"),b=document.getElementById("level"),L=document.getElementById("progress");let u=1,x=.3,f=0;const n={x:620,y:90,width:40,velocity:0},g={x:720,y:90},h=new Image;h.src="kid.svg";const v=new Image;v.src="grandma.svg";const p=new Image;p.src="moneybag.svg";let c=0;const w=3;h.onload=()=>{c++};v.onload=()=>{c++};p.onload=()=>{c++};let y=null,m=0;document.addEventListener("keydown",t=>{if(t.key==="ArrowLeft"||t.key==="ArrowRight"){if(t.preventDefault(),t.repeat)return;y!==t.key&&(y=t.key,m+=4)}});document.addEventListener("keyup",t=>{(t.key==="ArrowLeft"||t.key==="ArrowRight")&&t.preventDefault()});function I(){c>=w&&e.drawImage(h,n.x-20,n.y-10,80,80)}function P(){const t=n.x+n.width+5,a=g.y+35,s=g.x+20,l=g.y+47.5;e.strokeStyle="#000",e.lineWidth=12,e.lineCap="round",e.beginPath(),e.moveTo(t+30,a+15),e.lineTo(s,l),e.stroke(),e.strokeStyle="#f4d7b5",e.lineWidth=8,e.lineCap="round",e.beginPath(),e.moveTo(t+30,a+15),e.lineTo(s,l),e.stroke(),c>=w&&e.drawImage(p,t-10,a-10,50,50)}function T(){c>=w&&e.drawImage(v,g.x-30,g.y-30,100,100)}function A(){m>0&&(n.velocity-=m*.15,m*=.9);const t=x*(1+u*.035);n.velocity+=t,n.velocity*=.96,n.velocity=Math.max(-2,Math.min(2,n.velocity)),n.x+=n.velocity,n.x>620&&(n.x=620,n.velocity=Math.max(0,n.velocity)),n.x<=150&&M();const s=620,l=150,i=s-n.x,o=s-l,d=Math.min(100,Math.max(0,Math.floor(i/o*100)));L.textContent=d}function M(){u++,b.textContent=u,n.x=620,n.velocity=0,y=null,m=0,x+=.025,f=60}function k(){e.clearRect(0,0,r.width,r.height),e.fillStyle="#d9d9d9",e.fillRect(0,0,r.width,r.height);const t=150;e.strokeStyle="#555",e.lineWidth=4,e.setLineDash([10,10]),e.beginPath(),e.moveTo(t,0),e.lineTo(t,r.height),e.stroke(),e.setLineDash([]),A(),P(),I(),T(),f>0&&(e.save(),e.fillStyle="rgba(255, 215, 0, 0.9)",e.strokeStyle="#000",e.lineWidth=3,e.font="bold 48px Arial",e.textAlign="center",e.strokeText("Lygis "+u+"!",r.width/2,r.height/2),e.fillText("Lygis "+u+"!",r.width/2,r.height/2),e.restore(),f--),requestAnimationFrame(k)}k();
